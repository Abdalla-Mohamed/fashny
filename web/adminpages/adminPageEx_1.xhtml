<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../templates/templateAdmin.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns="http://www.w3.org/1999/xhtml" >

    <ui:define name="contPageName">
        Add New Place
    </ui:define>

    <ui:define name="contPageDescrp">

    </ui:define>

    <ui:define name="contPagePath">
        contPagePath
    </ui:define>

    <ui:define name="content" >
        <h:form>
        <div class="container-fluid">
            <div class="col-sm-6" >
<!--                <h:form style="width:100%;height:400px">-->
                    <h:panelGroup id="display">
                        <p:panelGrid columns="2" >

                            <p:outputLabel value="#{bundle.CreatePlaceLabel_name}" for="name" />
                            <p:inputText id="name" value="#{placeView_1.selected.name}" title="#{bundle.CreatePlaceTitle_name}" required="true" requiredMessage="#{bundle.CreatePlaceRequiredMessage_name}"/>

                            <p:outputLabel value="#{bundle.CreatePlaceLabel_address}" for="address" />
                            <p:inputText id="address" value="#{placeView_1.selected.address}" title="#{bundle.CreatePlaceTitle_address}" required="true" requiredMessage="#{bundle.CreatePlaceRequiredMessage_address}"/>

                            <p:outputLabel value="#{bundle.CreatePlaceLabel_description}" for="description" />
                            <p:inputTextarea rows="4" cols="30" id="description" value="#{placeView_1.selected.description}" title="#{bundle.CreatePlaceTitle_description}" />

                            <p:outputLabel value="#{bundle.CreatePlaceLabel_workHours}" for="workHours" />
                            <p:inputText id="workHours" value="#{placeView_1.selected.workHours}" title="#{bundle.CreatePlaceTitle_workHours}" required="true" requiredMessage="#{bundle.CreatePlaceRequiredMessage_workHours}"/>

                            <p:outputLabel value="#{bundle.CreatePlaceLabel_lang}" for="lang" />
                            <p:inputText id="lang" value="#{placeView_1.selected.lang}" title="#{bundle.CreatePlaceTitle_lang}" required="true" requiredMessage="#{bundle.CreatePlaceRequiredMessage_lang}"/>

                            <p:outputLabel value="#{bundle.CreatePlaceLabel_attd}" for="attd" />
                            <p:inputText id="attd" value="#{placeView_1.selected.attd}" title="#{bundle.CreatePlaceTitle_attd}" required="true" requiredMessage="#{bundle.CreatePlaceRequiredMessage_attd}"/>

                            <p:outputLabel value="Tags:" styleClass="col-xs-12" for="tag"/>
                            <p:selectManyMenu id="tag" value="#{placeView_1.selected.tagList}" tabindex="indx"  converter="converterTag" filter="true" filterMatchMode="contains" showCheckbox="true" scrollHeight="60"  styleClass="col-xs-12">
                                <f:selectItems value="#{tagBean.items}" var="tag"  itemLabel="#{tag.name}" itemValue="#{tag}" />
                            </p:selectManyMenu>

                            <p:outputLabel value="#{bundle.CreatePlaceLabel_validated}" for="validated" />
                            <p:selectBooleanCheckbox id="validated" value="#{placeView_1.selected.validated}" required="true" requiredMessage="#{bundle.EditPlaceRequiredMessage_validated}"/>

                            <p:outputLabel value="#{bundle.CreatePlaceLabel_active}" for="active" />
                            <p:selectBooleanCheckbox id="active" value="#{placeView_1.selected.active}" />



                            <p:commandButton actionListener="#{placeView_1.create}" value="#{bundle.Save}" />
                            <p:commandButton value="#{bundle.Cancel}"/>
                        </p:panelGrid>

                    </h:panelGroup>
<!--                </h:form>-->
            </div>
            <div class="col-sm-6" >
            <p:growl id="messages" showDetail="true" />
            <p:gmap id="gmap" center="36.890257,30.707417" zoom="13" type="HYBRID" style="width:100%;height:400px"
                    model="#{placeView_1.draggableModel}" onPointClick="handlePointClick(event);" widgetVar="map" >
                <p:ajax event="pointSelect" listener="#{placeView_1.onPointSelect}" update="messages" />
            </p:gmap>
            <!--        <h:form>
                        <p:commandButton value="count" action="#{placeView_1.count()}" />
                    </h:form>-->
            </div>
        </div>
            </h:form>
        <script type="text/javascript">
            var currentMarker = null;

            function handlePointClick(event) {
                if (currentMarker === null) {

                    currentMarker = new google.maps.Marker({
                        position: new google.maps.LatLng(event.latLng.lat(), event.latLng.lng())
                    });

                    PF('map').addOverlay(currentMarker);

                    //currentMarker.setMap(PF('map'));
                    // currentMarker = null;
                } else {

                    currentMarker.setMap(null);
                    currentMarker = new google.maps.Marker({
                        position: new google.maps.LatLng(event.latLng.lat(), event.latLng.lng())
                    });

                    PF('map').addOverlay(currentMarker);
                    //currentMarker = null;
                }
            }

            function markerAddComplete() {
                var title = document.getElementById('title');
                currentMarker.setTitle(title.value);
                title.value = "";

                currentMarker = null;
                PF('dlg').hide();
            }

            function cancel() {
                PF('dlg').hide();
                currentMarker.setMap(null);
                currentMarker = null;

                return false;
            }
        </script>
    </ui:define>

    <ui:define name="rightHeader">
        rightHeader
    </ui:define>

</ui:composition>
